#!/usr/bin/env zsh

() {
  0=${(%):-%x}
  PROJECT_HOME=${0:a:h:h}
}

function main() {
  [[ -f $PROJECT_HOME/cache/ztap/ztap.zsh ]] ||
    git clone -q https://github.com/mattmc3/ztap.git $PROJECT_HOME/cache/ztap
  source $PROJECT_HOME/cache/ztap/ztap.zsh
  if [[ ${#@[@]} -gt 0 ]]; then
    ztap $@
  else
    ztap $PROJECT_HOME/tests/*.zsh
  fi
}
main $@
